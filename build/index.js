(()=>{"use strict";var e,t={78:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.wp.i18n,s=window.wp.components,o=window.wp.blockEditor,r=window.wp.mediaUtils;function l({path:e,type:o,urlLink:r,index:l,hasUp:c,hasDown:h,set:u,move:m,remove:p}){let d={visibility:"image"===o?"visible":"hidden"};return(0,t.createElement)("div",{className:"showcase-media-row"},(0,t.createElement)(i,{hasUp:c,hasDown:h,move:m,index:l}),(0,t.createElement)("div",{className:"showcase-media-row-path"},(0,t.createElement)(s.TextControl,{label:(0,a.__)("path"),value:e,onChange:e=>{u({path:e,urlLink:r},l)}})),(0,t.createElement)("div",{className:"showcase-media-row-urlLink",style:d},(0,t.createElement)(s.TextControl,{label:(0,a.__)("Link (optional)"),value:r,onChange:t=>{u({path:e,type:o,urlLink:t},l)}})),(0,t.createElement)("div",{className:"showcase-media-row-delete"},(0,t.createElement)(n,{index:l,remove:p})))}function i({hasUp:e,hasDown:a,index:s,placeHolder:o,move:r}){let l=(0,t.createElement)("button",{type:"button",onClick:e?()=>{r("up",s)}:null,tabIndex:"-1","data-toolbar-item":"true","aria-disabled":!e,className:"components-button block-editor-block-mover-button is-up-button has-icon","aria-label":"Move up",style:{height:"24px"}},(0,t.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}))),i=(0,t.createElement)("button",{type:"button",onClick:a?()=>{r("down",s)}:null,tabIndex:"-1","aria-disabled":!a,className:"components-button block-editor-block-mover-button is-down-button has-icon","aria-label":"Move down",style:{height:"24px"}},(0,t.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))),n={height:"48px",flexDirection:"column"};return o&&(n.visibility="hidden"),(0,t.createElement)("div",{className:"block-editor-block-mover__move-button-container showcase-media-row-mover",style:n},l,i)}function n({index:e,remove:a}){return(0,t.createElement)(s.Button,{className:"showcase-media-row-delete",onClick:()=>{a(e)},icon:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}))})}function c({add:e,visible:o}){let r={};o||(r.display="none");let l=(0,t.createElement)(s.__experimentalText,{style:{fontSize:"90%",marginLeft:"auto",marginRight:"auto",paddingLeft:"36px"}},(0,a.__)("Drop a media file (PNG, JPEG, MP4, or PDF)","croquet-metaverse-web-showcase"));return(0,t.createElement)("div",{className:"showcase-add-row",style:r},l,(0,t.createElement)(s.Button,{variant:"primary",style:{width:"24px",height:"24px"},onClick:e,icon:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"}))}))}function h(e){return/(jpe?g|gif|png)$/i.test(e)?"image":/(pdf)$/i.test(e)?"pdf":/(mov|mp4)$/i.test(e)?"video":null}const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"croquet/webshowcase-block","version":"1.1.11","title":"Croquet Metaverse Web Showcase","category":"embed","icon":"admin-site","description":"A 3D multiplayer space on WordPress pages","attributes":{"cardsString":{"type":"string","selector":"div","default":"[{\\"place\\":1,\\"type\\":\\"image\\",\\"path\\":\\"https://croquet.io/webshowcase/site/CompanyLogo.jpg\\"},{\\"place\\":2,\\"type\\":\\"pdf\\",\\"path\\":\\"https://croquet.io/webshowcase/site/CompanyDeck.pdf\\"}]"},"minHeight":{"type":"string","selector":"div","default":"800px"},"apiKey":{"type":"string","selector":"div","default":""},"showcaseName":{"type":"string","selector":"div","default":"(empty)"},"voiceChat":{"type":"boolean","selector":"div","default":true},"showcasePrivacy":{"type":"string","selector":"div","default":"invite"},"uniqueSessionPerVisit":{"type":"boolean","selector":"div","default":true}},"supports":{"html":false},"textdomain":"croquet-metaverse-web-showcase","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,e.registerBlockType)(u,{edit:function({attributes:e,setAttributes:i}){let n=(0,o.useBlockProps)(),[u,m]=(0,t.useState)(JSON.parse(e.cardsString)),[p,d]=(0,t.useState)(e.minHeight),[w,v]=(0,t.useState)(e.apiKey),[b,g]=(0,t.useState)(!0),[y,f]=(0,t.useState)(e.showcaseName),[_,k]=(0,t.useState)(e.showcasePrivacy),[E,x]=(0,t.useState)(e.voiceChat),[C,q]=(0,t.useState)(!1),S=e.uniqueSessionPerVisit,P=(0,t.useCallback)(((e,t,a)=>{let s=[...a];return s[t]=e,s}),[]),L=(0,t.useCallback)((e=>{m((t=>{let a=e(t);if(a===t)return t;for(let e=0;e<a.length;e++)a[e].place=e+1;return a}))}),[]);(0,t.useEffect)((()=>{i({cardsString:JSON.stringify(u)})}),[u]),(0,t.useEffect)((()=>{let e=y;if("(empty)"===e){let e=`my-showcase${Math.floor(1e6*Math.random())}`.padStart(6,"0");f(e)}i({showcaseName:e})}),[y]),(0,t.useEffect)((()=>{!1===S&&(i({showcasePrivacy:"public"}),k("public"))}),[S]),(0,t.useEffect)((()=>{let e;e=41===w.length?/^[0-9a-zA-Z]+$/.test(w):/^[0-9]_[0-9a-zA-Z]+$/.test(w),g(e)}),[w]);let D,N=(0,t.useCallback)(((e,t)=>{L((a=>(e&&!e.type&&e.path&&(e.type=h(e.path)),P(e,t,a))))}),[L,P]),O=(0,t.useCallback)((e=>u[e]),[u]),A=(0,t.useCallback)(((e,t)=>{L((a=>{let s=[...a];if("up"===e){let e=s[t-1];return s[t-1]=s[t],s[t]=e,s}if("down"===e){let e=s[t+1];return s[t+1]=s[t],s[t]=e,s}}))}),[L]),M=(0,t.useCallback)((e=>{L((t=>{if(!e&&9===t.length||e&&t.length+e.length>9)return q("you cannot have more than 9 assets"),t;let a=[...t];return e?a=[...a,...e]:a.push({}),a}))}),[L]),B=(0,t.useCallback)((e=>{L((t=>{let a=[...t];return a.splice(e,1),C&&q(!1),a}))}),[L,C]),H=e=>{if(!e.map((e=>e.id)).reduce(((e,t)=>e&&t),!0))return;let t=e.map((e=>{let t=new URL(e.url).pathname,a=h(t);if(!a){let t=e.mime_type;t.startsWith("application/pdf")?a="pdf":t.startsWith("video")&&(a="video")}return a?{path:t,type:a}:null}));t=t.filter((e=>e)),M(t)},I=e=>{e&&e.message?q(e.message):q((0,a.__)("An error occurred","croquet-metaverse-web-showcase")),console.error(e)},T=(0,t.createElement)(s.__experimentalHeading,{style:{alignSelf:"center"},key:-5,level:4},(0,a.__)("Croquet Web Showcase","croquet-metaverse-web-showcase")),j="black";""===w?(D=(0,a.__)("Please set API key in the side bar settings","croquet-metaverse-web-showcase"),j="red"):b?D=(0,a.__)("API Key","croquet-metaverse-web-showcase")+": "+w:(D=(0,a.__)("The API Key is not in the right format. It should look like: 1abcdefg123456890ABCDEFG","croquet-metaverse-web-showcase"),j="red");let z=(0,t.createElement)(s.__experimentalText,{style:{marginRight:"10px"},color:j,key:-1,align:"right"},D),U=[...Array(u.length).keys()].map((e=>(0,t.createElement)(l,{key:e+1,index:e,path:O(e).path||"",urlLink:O(e).urlLink||"",hasUp:0!==e,hasDown:e!==u.length-1,type:O(e).type,set:N,move:A,remove:B}))),$=(0,t.createElement)(c,{key:-6,visible:u.length<9,add:()=>M()}),F=()=>{q(!1)},K=[T,z,(0,t.createElement)(s.__experimentalDivider,{key:-4}),...U,$];if(C){let e=(0,t.createElement)(s.Notice,{key:-7,onDismiss:F,status:"error"},C);K.push(e)}let V=(0,a.__)("A key to access the Croquet network. You can generate one on https://croquet.io/keys. Paste the key string that looks like: 1abcdefg123456890ABCDEFG","croquet-metaverse-web-showcase"),W=(0,a.__)("Determines the privacy of this Web Showcase instantiation","croquet-metaverse-web-showcase"),G=(0,a.__)("The height of the graphics on the page","croquet-metaverse-web-showcase");return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"showcase-container",...n,style:{minHeight:p,border:"1px solid #757575"}},(0,t.createElement)(s.__experimentalVStack,{alignment:"top"},K),(0,t.createElement)(s.DropZone,{onFilesDrop:e=>{(0,r.uploadMedia)({filesList:e,onFileChange:H,onError:I})}})),(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(s.PanelBody,{title:(0,a.__)("Settings","croquet-metaverse-web-showcase")},(0,t.createElement)(s.TextControl,{label:(0,a.__)("Croquet API Key","croquet-metaverse-web-showcase"),value:w,help:V,onChange:e=>{i({apiKey:e}),v(e)}}),(0,t.createElement)(s.RadioControl,{label:(0,a.__)("Showcase Privacy","croquet-metaverse-web-showcase"),help:W,selected:_,options:[{label:(0,a.__)("Invite Only","croquet-metaverse-web-showcase"),value:"invite"},{label:(0,a.__)("Public","croquet-metaverse-web-showcase"),value:"public"}],onChange:e=>{i({showcasePrivacy:e}),k(e)}}),(0,t.createElement)(s.ToggleControl,{label:(0,a.__)("Enable Dolby spatial voice chat","croquet-metaverse-web-showcase"),checked:E,help:e=>e?(0,a.__)("Dolby Spatial audio chat is enabled","croquet-metaverse-web-showcase"):(0,a.__)("Dolby Spatial audio chat is disabled","croquet-metaverse-web-showcase"),onChange:e=>{i({voiceChat:e}),x(e)}}),(0,t.createElement)(s.__experimentalUnitControl,{label:(0,a.__)("Minimum Height","croquet-metaverse-web-showcase"),value:p,help:G,onChange:e=>{i({minHeight:e}),d(e)}}))))}})}},a={};function s(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,a,o,r)=>{if(!a){var l=1/0;for(h=0;h<e.length;h++){a=e[h][0],o=e[h][1],r=e[h][2];for(var i=!0,n=0;n<a.length;n++)(!1&r||l>=r)&&Object.keys(s.O).every((e=>s.O[e](a[n])))?a.splice(n--,1):(i=!1,r<l&&(l=r));if(i){e.splice(h--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[a,o,r]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,l=a[0],i=a[1],n=a[2],c=0;if(l.some((t=>0!==e[t]))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(n)var h=n(s)}for(t&&t(a);c<l.length;c++)r=l[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(h)},a=self.webpackChunkcroquet_metaverse_web_showcase=self.webpackChunkcroquet_metaverse_web_showcase||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=s.O(void 0,[431],(()=>s(78)));o=s.O(o)})();